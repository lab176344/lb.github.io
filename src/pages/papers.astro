---
import Layout from '../layouts/Layout.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

const papers = (await getCollection('papers')).sort(
	(a: CollectionEntry<'papers'>, b: CollectionEntry<'papers'>) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Papers">
	<h1 class="text-2xl font-bold text-tui-accent mb-6">~/papers</h1>

	<div class="space-y-6">
		{papers.map((paper: CollectionEntry<'papers'>) => (
			<div class="border-l-2 border-tui-border pl-4 hover:border-tui-accent transition-colors">
				<h2 class="text-xl font-bold text-tui-fg">
					{paper.data.title}
				</h2>
				
				<div class="flex gap-4 text-sm text-tui-dim font-mono mt-1 mb-2">
					<span>{paper.data.pubDate.toISOString().split('T')[0]}</span>
					{paper.data.conference && <span>@ {paper.data.conference}</span>}
				</div>

				<p class="text-tui-dim/80 italic mb-3">
					"{paper.data.abstract}"
				</p>

				{paper.data.pdfUrl && (
					<a href={paper.data.pdfUrl} class="text-tui-accent text-sm hover:underline">
						[ PDF Download ]
					</a>
				)}
			</div>
		))}
	</div>
</Layout>
